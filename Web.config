<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- optional - for logging config -->
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" requirePermission="false"/>
  </configSections>
  <appSettings>
    
    <!-- highlightingProxyTo is your internal URL to Highlighter -->
    <add key="highlightingProxyTo" value="http://api.highlight4.me/"/>
    
    <!-- Proxied path. It's used to extract the rest of path that should be sent to highlighting server. -->
    <add key="highlightingProxyLocalPathPrefix" value="highlighter/"/>
    
    <!-- If specified, the remote path prefix will be removed from redirection location received from remote server
      and the rest of string will be appended to highlightingProxyLocalPathPrefix to form transformed location -->
    <add key="highlightingProxyRemotePathPrefix" value="/"/>
  
    <!-- By default, application path will be prepanded to highlightingProxyLocalPathPrefix when 
      building redirection URL. Enable key bellow to disable this behavior. -->
    <!--<add key="highlightingProxyAddAppPathToRedirect" value="false"/>-->
    
  </appSettings>
  <system.web>
    <compilation debug="true">
    </compilation>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
      <requestFiltering>
        <requestLimits maxUrl="10999" maxQueryString="2097151"/>
      </requestFiltering>
    </security>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <add path="highlighter/*" verb="*" type="PDFHighlighter.HighlightingProxyHandler" name="hlreq"/>
      <add path="highlighter/doc/*" verb="*" type="PDFHighlighter.HighlightingProxyHandler" name="hldoc"/>
    </handlers>
  </system.webServer>
  <!-- optional -->
  <log4net>
    <appender name="FileAppender" type="log4net.Appender.FileAppender">
      <file value="C:\Windows\Temp\hlproxy.log"/>
      <appendToFile value="false"/>
      <staticLogFileName value="true"/>
      <encoding value="utf-8"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date %-5level - %message%newline"/>
      </layout>
    </appender>
    <root>
      <level value="INFO"/>
      <appender-ref ref="FileAppender"/>
    </root>
  </log4net>
</configuration>
